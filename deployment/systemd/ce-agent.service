[Unit]
Description=Cyber Essentials Scanner Agent
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/ce-agent
ExecStart=/usr/bin/python3 /opt/ce-agent/agent.py --daemon
Restart=on-failure
RestartSec=30
StandardOutput=journal
StandardError=journal

# Environment variables
Environment="CE_CONTROLLER_URL=https://controller.local:8000"
Environment="CE_VERIFY_SSL=true"
Environment="CE_HEARTBEAT_INTERVAL=60"
Environment="CE_COMMAND_POLL_INTERVAL=30"
Environment="CE_SCAN_SCHEDULE=daily"

[Install]
WantedBy=multi-user.target
